import soundProducer.*
import wollok.game.*
import direcciones.*
import vida.*
import jugador.*
import arma.*
import pepita.*
import enemigo.*


describe "Test Jugador" {	
test "Jugador se mueve"{
	jugador.moverPara(derecha)
	assert.equals(game.at(1,0), jugador.position())
}

test "Cuando un jugador dispara mira asi arriba"{
	jugador.disparar()
	assert.equals(arriba, jugador.direccion())
}
	
test "Cuando un jugador es colicionado por un objeto pierde uno de vida"{
	jugador.colisionadoPor(-1)
	assert.equals(2, jugador.obtenerVidas().cantidad())
}
}


describe "Test Vida" {	
test "Se aumenta la cantidad de Vida"{	
	vida.modificar(1)
	assert.equals(4,vida.cantidad())
}

test "Se disminuye la cantidad de Vida"{	
	vida.modificar(-1)
	assert.equals(2,vida.cantidad())
}

test "Cuando la vida es 0 se termina el juego"{	
	// ...
	assert.that(true)
}
}


describe "Test Enemigo"{
var enemigo = new Enemigo()

test "Un enemigo que hace danio"{
	//var danio = enemigo.danio()
	//assert.equals(-1, danio)
	assert.that(true)
}

test "Un enemigo que impacta"{	
	//assert.equals(desaparece, ejercito.impacta())
	assert.that(true)
}	
}


describe "Test Lanza"{

test "Al disparar el arma se posiciciona debajo del jugador"{
	lanza.disparar(jugador)
	assert.equals(lanza.position(), jugador.position().down(2))
}

test "El arma se desplaza si esta en movimiento"{
	
	lanza.disparar(jugador)
	const posicionActual = lanza.position().up(1)
	lanza.desplazar() 
	
	assert.equals(posicionActual, lanza.position())
}

test "El arma no se desplaza si no esta en movimiento"{	
	const posicionActual = lanza.position()
	lanza.desplazar() 
	assert.equals(posicionActual, lanza.position())
}	

test "Si el arma impacta un objote lo elimina" {
	const enemigo = new Enemigo(posicion = game.at(6, 20))
	game.addVisual(enemigo)
	
	lanza.impactar(enemigo)
	assert.notThat(game.hasVisual(enemigo))
}

test "Si el arma impacta al personaje no lo elimina" {
	game.addVisual(jugador)
	lanza.impactar(jugador)
	assert.that(game.hasVisual(jugador))
}
 
}

